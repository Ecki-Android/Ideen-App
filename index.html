
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ideen-App</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f4f6f8; margin: 0; padding: 2rem; }
        h1 { color: #333; }
        #ideaInput, #categoryInput {
            padding: 0.5rem;
            width: 70%;
            margin-bottom: 0.5rem;
        }
        button {
            padding: 0.5rem 1rem;
            margin: 0.2rem;
            border: none;
            border-radius: 5px;
            background-color: #0077cc;
            color: white;
            cursor: pointer;
        }
        button:hover { background-color: #005fa3; }
        .idea {
            background: white;
            border-left: 5px solid #0077cc;
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 5px;
        }
        .timestamp { font-size: 0.8rem; color: gray; }
        .category { font-style: italic; color: #555; }
    </style>
</head>
<body>
    <h1>Willkommen in deiner Ideen-App, Egbert!</h1>
    <p>Hier kannst du deine Ideen sammeln, notieren und später erweitern.</p>

    <input type="text" id="ideaInput" placeholder="Neue Idee eingeben" />
    <input type="text" id="categoryInput" placeholder="Kategorie oder Priorität (optional)" />
    <br>
    <button onclick="addIdea()">Idee speichern</button>
    <button onclick="exportText()">Export als Text</button>
    <button onclick="exportPDF()">Export als PDF</button>
    <button onclick="shareEmail()">Per E-Mail teilen</button>
    <button onclick="shareWhatsApp()">Per WhatsApp teilen</button>

    <div id="ideasList"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        function getCurrentTimestamp() {
            const now = new Date();
            return now.toLocaleDateString() + " " + now.toLocaleTimeString('de-DE', { hour12: false });
        }

        function saveIdeas(ideas) {
            localStorage.setItem("ideenListe", JSON.stringify(ideas));
        }

        function loadIdeas() {
            const data = localStorage.getItem("ideenListe");
            return data ? JSON.parse(data) : [];
        }

        function renderIdeas() {
            const ideasList = document.getElementById("ideasList");
            ideasList.innerHTML = "";
            const ideas = loadIdeas();

            ideas.forEach((idea, index) => {
                const div = document.createElement("div");
                div.className = "idea";
                div.innerHTML = `
                    <div><strong>${idea.text}</strong></div>
                    <div class="timestamp">${idea.timestamp}</div>
                    <div class="category">${idea.category ? "Kategorie: " + idea.category : ""}</div>
                    <button onclick="editIdea(${index})">Bearbeiten</button>
                    <button onclick="deleteIdea(${index})">Löschen</button>
                `;
                ideasList.appendChild(div);
            });
        }

        function addIdea() {
            const input = document.getElementById("ideaInput");
            const category = document.getElementById("categoryInput");
            const ideas = loadIdeas();

            if (input.value.trim() === "") return;

            ideas.push({
                text: input.value.trim(),
                timestamp: getCurrentTimestamp(),
                category: category.value.trim()
            });

            saveIdeas(ideas);
            input.value = "";
            category.value = "";
            renderIdeas();
        }

        function editIdea(index) {
            const ideas = loadIdeas();
            const newText = prompt("Neue Idee eingeben:", ideas[index].text);
            const newCat = prompt("Neue Kategorie eingeben:", ideas[index].category);
            if (newText !== null) {
                ideas[index].text = newText;
                ideas[index].category = newCat;
                ideas[index].timestamp = getCurrentTimestamp();
                saveIdeas(ideas);
                renderIdeas();
            }
        }

        function deleteIdea(index) {
            const ideas = loadIdeas();
            if (confirm("Diese Idee wirklich löschen?")) {
                ideas.splice(index, 1);
                saveIdeas(ideas);
                renderIdeas();
            }
        }

        function exportText() {
            const ideas = loadIdeas();
            let content = ideas.map(i => `${i.timestamp} | ${i.text} ${i.category ? "(Kategorie: " + i.category + ")" : ""}`).join("\n");
            const blob = new Blob([content], { type: "text/plain;charset=utf-8" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "ideen-export.txt";
            a.click();
            URL.revokeObjectURL(url);
        }

        async function exportPDF() {
            const ideas = loadIdeas();
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            ideas.forEach((idea, i) => {
                doc.text(`${idea.timestamp} - ${idea.text} ${idea.category ? "(Kategorie: " + idea.category + ")" : ""}`, 10, 10 + (i * 10));
            });

            doc.save("ideen-export.pdf");
        }

        function shareEmail() {
            const ideas = loadIdeas();
            const content = ideas.map(i => `${i.timestamp} | ${i.text} ${i.category ? "(Kategorie: " + i.category + ")" : ""}`).join("\n");
            const mailto = "mailto:?subject=Meine Ideen&body=" + encodeURIComponent(content);
            window.location.href = mailto;
        }

        function shareWhatsApp() {
            const ideas = loadIdeas();
            const content = ideas.map(i => `${i.timestamp} | ${i.text} ${i.category ? "(Kategorie: " + i.category + ")" : ""}`).join("\n");
            const waUrl = "https://wa.me/?text=" + encodeURIComponent(content);
            window.open(waUrl, "_blank");
        }

        window.onload = renderIdeas;
    </script>
</body>
</html>
