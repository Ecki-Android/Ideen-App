
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Ideen-App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 1rem;
        }
        h1 {
            color: #333;
        }
        input, select, button, textarea {
            margin: 0.3rem 0;
            padding: 0.5rem;
            font-size: 1rem;
        }
        .idea {
            border-left: 8px solid;
            padding: 0.5rem;
            margin: 0.5rem 0;
            background: #f9f9f9;
        }
        .high { border-color: red; }
        .medium { border-color: orange; }
        .low { border-color: green; }
    </style>
</head>
<body>
    <h1>Willkommen in deiner Ideen-App, Egbert!</h1>
    <textarea id="ideaText" placeholder="Deine Idee..."></textarea><br>
    <label>Kategorie:
        <select id="category">
            <option value="Privat">Privat</option>
            <option value="Arbeit">Arbeit</option>
            <option value="Später">Später</option>
            <option value="Sonstiges">Sonstiges</option>
        </select>
    </label><br>
    <label>Priorität:</label>
    <button onclick="setPriority('Hoch')" id="pHigh">🔴 Hoch</button>
    <button onclick="setPriority('Mittel')" id="pMedium">🟠 Mittel</button>
    <button onclick="setPriority('Niedrig')" id="pLow">🟢 Niedrig</button><br>
    <button onclick="saveIdea()">💾 Speichern</button>
    <button onclick="exportIdeas()">📄 Exportieren</button>
    <button onclick="shareIdeas()">📤 Teilen</button>

    <h2>Deine Ideen</h2>
    <div id="ideasContainer"></div>

    <script>
        let selectedPriority = "Mittel";

        function setPriority(priority) {
            selectedPriority = priority;
        }

        function saveIdea() {
            const text = document.getElementById("ideaText").value;
            const category = document.getElementById("category").value;
            const timestamp = new Date().toLocaleString("de-DE", { hour12: false });
            const idea = { text, category, priority: selectedPriority, timestamp };
            let ideas = JSON.parse(localStorage.getItem("ideen")) || [];
            ideas.push(idea);
            localStorage.setItem("ideen", JSON.stringify(ideas));
            document.getElementById("ideaText").value = "";
            displayIdeas();
        }

        function displayIdeas() {
            const container = document.getElementById("ideasContainer");
            container.innerHTML = "";
            const ideas = JSON.parse(localStorage.getItem("ideen")) || [];
            ideas.forEach((idea, index) => {
                const div = document.createElement("div");
                div.className = "idea " + (idea.priority === "Hoch" ? "high" : idea.priority === "Mittel" ? "medium" : "low");
                div.innerHTML = `
                    <strong>${idea.timestamp}</strong><br>
                    <strong>Kategorie:</strong> ${idea.category}<br>
                    <strong>Priorität:</strong> ${idea.priority}<br>
                    <strong>Idee:</strong> ${idea.text}<br>
                    <button onclick="editIdea(${index})">✏️ Bearbeiten</button>
                    <button onclick="deleteIdea(${index})">🗑️ Löschen</button>
                `;
                container.appendChild(div);
            });
        }

        function deleteIdea(index) {
            let ideas = JSON.parse(localStorage.getItem("ideen")) || [];
            ideas.splice(index, 1);
            localStorage.setItem("ideen", JSON.stringify(ideas));
            displayIdeas();
        }

        function editIdea(index) {
            let ideas = JSON.parse(localStorage.getItem("ideen")) || [];
            const idea = ideas[index];
            document.getElementById("ideaText").value = idea.text;
            document.getElementById("category").value = idea.category;
            selectedPriority = idea.priority;
            ideas.splice(index, 1);
            localStorage.setItem("ideen", JSON.stringify(ideas));
            displayIdeas();
        }

        function exportIdeas() {
            const ideas = JSON.parse(localStorage.getItem("ideen")) || [];
            const content = ideas.map(i => `📌 ${i.timestamp} [${i.category}] (${i.priority}): ${i.text}`).join("\n\n");
            const blob = new Blob([content], { type: "text/plain" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "ideen-export.txt";
            a.click();
            URL.revokeObjectURL(url);
        }

        function shareIdeas() {
            const ideas = JSON.parse(localStorage.getItem("ideen")) || [];
            const text = ideas.map(i => `${i.timestamp} (${i.priority}): ${i.text}`).join("\n");
            if (navigator.share) {
                navigator.share({
                    title: "Meine Ideen",
                    text: text
                });
            } else {
                alert("Teilen wird von diesem Gerät nicht unterstützt.");
            }
        }

        displayIdeas();
    </script>
</body>
</html>
